import{j as v,r as l,A as C,a as L,F as b,R as A,b as R}from"./vendor.959e7178.js";const S=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}};S();const E="_circle_77mis_1",M="_text_77mis_22";var u={"circle-container":"_circle-container_77mis_1",circle:E,"circle-back":"_circle-back_77mis_17",text:M,"text-percentage":"_text-percentage_77mis_27","text-name":"_text-name_77mis_31"};const e=v.exports.jsx,p=v.exports.jsxs,f=({name:i,value:n,percentage:r})=>p("div",{className:u["circle-container"],children:[e("div",{className:"circle-bg",children:p("svg",{width:"30",height:"30",children:[e("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",className:u.circle}),e("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",strokeDasharray:"84.82300164692441",transform:"rotate(-90,15,15)",className:u["circle-back"],style:{strokeDashoffset:84.82300164692441*((100-r)/100)}})]})}),p("div",{className:u.text,children:[e("span",{className:u["text-percentage"],children:n}),e("span",{className:u["text-name"],children:i})]})]}),j="_status_7qmvm_1";var O={status:j};const k=()=>p("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M9.6 5.5H6.4C5.90294 5.5 5.5 5.90294 5.5 6.4V17.6C5.5 18.0971 5.90294 18.5 6.4 18.5H9.6C10.0971 18.5 10.5 18.0971 10.5 17.6V6.4C10.5 5.90294 10.0971 5.5 9.6 5.5Z",fill:"white"}),e("path",{d:"M17.6 5.5H14.4C13.9029 5.5 13.5 5.90294 13.5 6.4V17.6C13.5 18.0971 13.9029 18.5 14.4 18.5H17.6C18.0971 18.5 18.5 18.0971 18.5 17.6V6.4C18.5 5.90294 18.0971 5.5 17.6 5.5Z",fill:"white"})]}),D=()=>e("svg",{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7181 1.69598L6.64613 14.1511L0.881897 8.20392L2.31803 6.81198L6.64613 11.2775L17.2819 0.304031L18.7181 1.69598Z",fill:"#2ec495"})}),T=({device:i})=>{const[n,r]=l.exports.useState("-"),[a,t]=l.exports.useState(0),[s,m]=l.exports.useState(0),[h,x]=l.exports.useState(0),[g,y]=l.exports.useState(0);l.exports.useLayoutEffect(()=>{C.addModuleDataListener(w)},[i]);const w=_=>{const o=_.streams;if(Object.keys(o).length===0)throw new Error("No streams.");Object.keys(o).forEach((d,F)=>{const c=B(o,d);if(c!==void 0){if(typeof c=="number"){o[d].data[0].name==="time.elapse"&&t(c),o[d].data[0].name==="time.remaining"&&m(c),o[d].data[0].name==="completion"&&x(c),o[d].data[0].name==="voltage"&&y(c);return}if(o[d].data[0].name==="mission.state"&&c.length>3){let N=(c.replaceAll('"',"")[0].toUpperCase()+c.replaceAll('"',"").slice(1)).trim();r(N)}}})};return p("div",{children:[p("div",{className:O.status,children:[n==="Halted"?e(k,{}):e(D,{}),e("span",{children:n})]}),e(f,{percentage:h,name:"Completion",value:h+"%"}),e(f,{percentage:100/(a+s)*a,name:"Time Elapse",value:a+"min"}),e(f,{percentage:100/(a+s)*s,name:"Time Remaining",value:s+"min"}),e(f,{percentage:g,name:"Battery",value:`${g}%`})]})},B=(i,n)=>{if(i[n]===void 0)return"No stream.";if(i[n].loading)return;if(i[n].tooMuchData)return"Too much data.";if(i[n].data.length===0)return"No data.";const r=i[n].data[0].points.at(-1);return r?r[1]:"No datapoints."};function H(){const[i,n]=l.exports.useState();l.exports.useEffect(()=>{r()},[]);const r=async()=>{if(await L.waitTilAuthenticated()){const a=await b.getCurrentDevice();n(a)}};return e("div",{className:"App",children:e(T,{device:i})})}A.render(e(R.StrictMode,{children:e(H,{})}),document.getElementById("root"));
