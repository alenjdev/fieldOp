import{j as w,r as u,A as L,a as b,F as A,R,b as S}from"./vendor.959e7178.js";const E=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}};E();const M="_circle_77mis_1",j="_text_77mis_22";var p={"circle-container":"_circle-container_77mis_1",circle:M,"circle-back":"_circle-back_77mis_17",text:j,"text-percentage":"_text-percentage_77mis_27","text-name":"_text-name_77mis_31"};const e=w.exports.jsx,f=w.exports.jsxs,g=({name:s,value:r,percentage:a})=>f("div",{className:p["circle-container"],children:[e("div",{className:"circle-bg",children:f("svg",{width:"30",height:"30",children:[e("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",className:p.circle}),e("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",strokeDasharray:"84.82300164692441",transform:"rotate(-90,15,15)",className:p["circle-back"],style:{strokeDashoffset:84.82300164692441*((100-a)/100)}})]})}),f("div",{className:p.text,children:[e("span",{className:p["text-percentage"],children:r}),e("span",{className:p["text-name"],children:s})]})]}),D="_status_7qmvm_1";var O={status:D};const k=()=>f("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{d:"M9.6 5.5H6.4C5.90294 5.5 5.5 5.90294 5.5 6.4V17.6C5.5 18.0971 5.90294 18.5 6.4 18.5H9.6C10.0971 18.5 10.5 18.0971 10.5 17.6V6.4C10.5 5.90294 10.0971 5.5 9.6 5.5Z",fill:"white"}),e("path",{d:"M17.6 5.5H14.4C13.9029 5.5 13.5 5.90294 13.5 6.4V17.6C13.5 18.0971 13.9029 18.5 14.4 18.5H17.6C18.0971 18.5 18.5 18.0971 18.5 17.6V6.4C18.5 5.90294 18.0971 5.5 17.6 5.5Z",fill:"white"})]}),T=()=>e("svg",{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7181 1.69598L6.64613 14.1511L0.881897 8.20392L2.31803 6.81198L6.64613 11.2775L17.2819 0.304031L18.7181 1.69598Z",fill:"#2ec495"})}),B=({device:s})=>{const[r,a]=u.exports.useState("-"),[o,t]=u.exports.useState(0),[i,m]=u.exports.useState(0),[v,x]=u.exports.useState(0),[y,_]=u.exports.useState(0),h=(l,c,d)=>l+d*1e3<c;u.exports.useLayoutEffect(()=>{L.addModuleDataListener(C)},[s]);const C=l=>{const c=l.streams;if(Object.keys(c).length===0)throw new Error("No streams.");Object.keys(c).forEach(d=>{const n=H(c,d);if(n[1]!==void 0){if(typeof n[1]=="number"){if(c[d].data[0].name==="time.elapse"){if(h(n[0],l.time,10)){t(0);return}t(n[1])}if(c[d].data[0].name==="time.remaining_2"){if(h(n[0],l.time,10)){m(0);return}m(n[1])}if(c[d].data[0].name==="completion"){if(h(n[0],l.time,10)){x(0);return}x(n[1])}if(c[d].data[0].name==="voltage"){if(h(n[0],l.time,10)){_(0);return}_(n[1])}return}if(c[d].data[0].name==="status"&&n[1].length>3){if(h(n[0],l.time,10)){a("-");return}let N=(n[1].replaceAll('"',"")[0].toUpperCase()+n[1].replaceAll('"',"").slice(1)).trim();a(N)}}})};return f("div",{children:[f("div",{className:O.status,children:[r==="Halted"?e(k,{}):e(T,{}),e("span",{children:r})]}),e(g,{percentage:v,name:"Completion",value:v+"%"}),e(g,{percentage:100/(o+i)*o,name:"Time Elapse",value:o+"min"}),e(g,{percentage:100/(o+i)*i,name:"Time Remaining",value:i+"min"}),e(g,{percentage:y,name:"Battery",value:`${y}%`})]})},H=(s,r)=>{if(s[r]===void 0)return"No stream.";if(s[r].loading)return;if(s[r].tooMuchData)return"Too much data.";if(s[r].data.length===0)return"No data.";const a=s[r].data[0].points.at(-1);return a||"No datapoints."};function F(){const[s,r]=u.exports.useState();u.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await b.waitTilAuthenticated()){const o=await A.getCurrentDevice();r(o)}};return e("div",{className:"App",children:e(B,{device:s})})}R.render(e(S.StrictMode,{children:e(F,{})}),document.getElementById("root"));
