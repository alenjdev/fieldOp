import{j as f,r as p,A as h,a as g,F as v,R as x,b as y}from"./vendor.959e7178.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(n){if(n.ep)return;n.ep=!0;const t=a(n);fetch(n.href,t)}};w();const _="_circle_77mis_1",N="_text_77mis_22";var m={"circle-container":"_circle-container_77mis_1",circle:_,"circle-back":"_circle-back_77mis_17",text:N,"text-percentage":"_text-percentage_77mis_27","text-name":"_text-name_77mis_31"};const i=f.exports.jsx,d=f.exports.jsxs,u=({name:r,value:e,percentage:a})=>d("div",{className:m["circle-container"],children:[i("div",{className:"circle-bg",children:d("svg",{width:"30",height:"30",children:[i("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",className:m.circle}),i("circle",{cx:"15",cy:"15",r:"13.5",fill:"none",strokeDasharray:"84.82300164692441",transform:"rotate(-90,15,15)",className:m["circle-back"],style:{strokeDashoffset:84.82300164692441*((100-a)/100)}})]})}),d("div",{className:m.text,children:[i("span",{className:m["text-percentage"],children:e}),i("span",{className:m["text-name"],children:r})]})]}),b="_status_7qmvm_1";var C={status:b};const L=()=>d("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i("path",{d:"M9.6 5.5H6.4C5.90294 5.5 5.5 5.90294 5.5 6.4V17.6C5.5 18.0971 5.90294 18.5 6.4 18.5H9.6C10.0971 18.5 10.5 18.0971 10.5 17.6V6.4C10.5 5.90294 10.0971 5.5 9.6 5.5Z",fill:"white"}),i("path",{d:"M17.6 5.5H14.4C13.9029 5.5 13.5 5.90294 13.5 6.4V17.6C13.5 18.0971 13.9029 18.5 14.4 18.5H17.6C18.0971 18.5 18.5 18.0971 18.5 17.6V6.4C18.5 5.90294 18.0971 5.5 17.6 5.5Z",fill:"white"})]}),R=()=>i("svg",{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7181 1.69598L6.64613 14.1511L0.881897 8.20392L2.31803 6.81198L6.64613 11.2775L17.2819 0.304031L18.7181 1.69598Z",fill:"#2ec495"})}),E=({device:r})=>{const[e,a]=p.exports.useState({status:"-",timeElapse:0,timeRemaining:0,completion:0,battery:0});p.exports.useLayoutEffect(()=>{h.addModuleDataListener(o)},[r]);const o=n=>{const t=n.streams;if(Object.keys(t).length===0)throw new Error("No streams.");const s=e;Object.keys(t).forEach((l,M)=>{const c=A(t,l);if(c!==void 0){if(typeof c=="number"){t[l].data[0].name==="time.elapse"&&(s.timeElapse=c),t[l].data[0].name==="time.remaining"&&(s.timeRemaining=c),t[l].data[0].name==="completion"&&(s.completion=c),t[l].data[0].name==="voltage"&&(s.completion=c);return}t[l].data[0].name==="mission.state"&&(s.status=(c.replaceAll('"',"")[0].toUpperCase()+c.replaceAll('"',"").slice(1)).trim())}}),JSON.stringify(e)!==JSON.stringify(s)&&a(s)};return d("div",{children:[d("div",{className:C.status,children:[e.status==="Halted"?i(L,{}):i(R,{}),i("span",{children:e.status})]}),i(u,{percentage:e.completion,name:"Completion",value:e.completion+"%"}),i(u,{percentage:100/(e.timeElapse+e.timeRemaining)*e.timeElapse,name:"Time Elapse",value:e.timeElapse+"min"}),i(u,{percentage:100/(e.timeElapse+e.timeRemaining)*e.timeRemaining,name:"Time Remaining",value:e.timeRemaining+"min"}),i(u,{percentage:e.battery,name:"Battery",value:`${e.battery}%`})]})},A=(r,e)=>{if(r[e]===void 0)return"No stream.";if(r[e].loading)return;if(r[e].tooMuchData)return"Too much data.";if(r[e].data.length===0)return"No data.";const a=r[e].data[0].points.at(-1);return a?a[1]:"No datapoints."};function O(){const[r,e]=p.exports.useState();p.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await g.waitTilAuthenticated()){const o=await v.getCurrentDevice();e(o)}};return i("div",{className:"App",children:i(E,{device:r})})}x.render(i(y.StrictMode,{children:i(O,{})}),document.getElementById("root"));
